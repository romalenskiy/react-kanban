(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),i=n.n(c),d=n(3),o=n(5),u=n(21),s=n.n(u),l=n(10),f=n(49),m=n(7),g=n(4),v=n(2),b=n(22),p=n.n(b),I="LANE_ADD",O="CARD_ADD",j="CARD_MOVE",E={entities:{1:{id:1,name:"To do",cardIds:["1","2","3"]},2:{id:2,name:"In progress",cardIds:[]},3:{id:3,name:"Done",cardIds:[]}},ids:[1,2,3]},h={entities:{1:{id:1,task:"Quis quis do ullamco excepteur ipsum ut ad non."},2:{id:2,task:"Sint aliqua anim adipisicing aute. Dolore duis pariatur sint excepteur commodo nostrud aliqua culpa. Minim laborum voluptate commodo id nostrud ex eu."},3:{id:3,task:"Enim enim amet fugiat."}},ids:[1,2,3]};var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return function(e,t){var n=p()(),a={id:n,name:t.name.trim(),cardIds:[]},r=Object(v.a)({},e.entities,Object(g.a)({},n,a)),c=[].concat(Object(m.a)(e.ids),[n]);return Object(v.a)({},e,{entities:r,ids:c})}(e,t);case O:return function(e,t){var n=t.card,a=n.laneId,r=n.cardId,c=e.entities[a],i=Object(v.a)({},c,{cardIds:[].concat(Object(m.a)(c.cardIds),[r])}),d=Object(v.a)({},e.entities,Object(g.a)({},a,i));return Object(v.a)({},e,{entities:d})}(e,t);case j:return function(e,t){for(var n,a=t.sourceCardId,r=t.targetId,c=null,i=null,d=e.ids.length,o=0;o<d;o+=1){var u=e.entities[e.ids[o]].cardIds,s=u.includes(a),l=u.includes(r)||e.ids[o]===r;if(s&&(c=e.ids[o],i))break;if(l&&(i=e.ids[o],c))break}var f=e.entities[c],b=e.entities[i]||e.entities[r],p=f.cardIds.findIndex(function(e){return e===a}),I=b.cardIds.findIndex(function(e){return e===r});if(c===i){var O=Object(m.a)(f.cardIds);O.splice(p,1),O.splice(I,0,a);var j=Object(v.a)({},f,{cardIds:O}),E=Object(v.a)({},e.entities,Object(g.a)({},c,j));return Object(v.a)({},e,{entities:E})}var h=Object(m.a)(f.cardIds);h.splice(p,1);var w=Object(v.a)({},f,{cardIds:h}),D=Object(m.a)(b.cardIds);D.splice(I,0,a);var _=Object(v.a)({},b,{cardIds:D}),y=Object(v.a)({},e.entities,(n={},Object(g.a)(n,c,w),Object(g.a)(n,i,_),n));return Object(v.a)({},e,{entities:y})}(e,t);default:return e}};var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return function(e,t){var n=t.card,a=n.cardId,r={id:a,task:n.task.trim()},c=Object(v.a)({},e.entities,Object(g.a)({},a,r)),i=[].concat(Object(m.a)(e.ids),[a]);return Object(v.a)({},e,{entities:c,ids:i})}(e,t);default:return e}},_=Object(l.combineReducers)({laneState:w,cardState:D}),y=Object(f.createLogger)(),x=Object(l.createStore)(_,void 0,Object(l.applyMiddleware)(y));function k(e,t){return{type:j,sourceCardId:e,targetId:t}}var C={CARD:"card"},N=Object(a.forwardRef)(function(e,t){var n=e.task,c=e.connectDragSource,i=e.connectDragPreview,d=e.isDragging,o=e.connectDropTarget;Object(a.useEffect)(function(){i(Object(u.getEmptyImage)())},[]);var s=Object(a.useRef)();Object(a.useImperativeHandle)(t,function(){return{getNode:function(){return s.current}}}),c(s),o(s);var l="box card";return d&&(l+=" card_dragging"),r.a.createElement("div",{className:l,ref:s},n)});var S=Object(o.DragSource)(C.CARD,{beginDrag:function(e,t,n){var a=e.cardId,r=e.cardIndex,c=n.getNode().getBoundingClientRect();return{cardId:a,cardIndex:r,height:c.height,width:c.width}}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}})(N),R=Object(o.DropTarget)(C.CARD,{hover:function(e,t,n){if(!n)return null;var a=n.getNode();if(!a)return null;var r=e.cardId,c=e.cardIndex,i=e.onCardMove,d=t.getItem().cardIndex,o=c,u=t.getItem().cardId,s=r;if(u!==s){var l=a.getBoundingClientRect(),f=(l.bottom-l.top)/2,m=t.getClientOffset().y-l.top;d<o&&m<f||d>o&&m>f||(i(u,s),t.getItem().cardIndex=o)}}},function(e,t){return{connectDropTarget:e.dropTarget()}})(S);var A=Object(d.b)(function(e,t){return{task:e.cardState.entities[t.cardId].task}},function(e){return{onCardMove:function(t,n){return e(k(t,n))}}})(R),T=n(6);var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return/\S+/.test(e)},r=Object(a.useState)(e),c=Object(T.a)(r,2),i=c[0],d=c[1],o=Object(a.useState)(t),u=Object(T.a)(o,2),s=u[0],l=u[1];return Object(a.useEffect)(function(){var e=n(i);l(e)},[i]),[i,d,s,l]};var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["click"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(a.useState)(n),c=Object(T.a)(r,2),i=c[0],d=c[1],o=Object(a.useRef)(null);function u(e){o.current&&!o.current.contains(e.target)&&(d(!1),t())}return Object(a.useEffect)(function(){return e.forEach(function(e){document.addEventListener(e,u)}),function(){e.forEach(function(e){document.removeEventListener(e,u)})}},[]),[o,i,d]},B=n(50),P=n.n(B),q=n(51),J=n.n(q);var K=Object(d.b)(null,function(e,t){return{onAdd:function(n,a){return e("lane"===t.type?{type:I,name:n}:(r={laneId:a,cardId:p()(),task:n},{type:O,card:r}));var r}}})(function(e){var t=e.type,n=e.laneId,a=e.onAdd,c=M(),i=Object(T.a)(c,3),d=i[0],o=i[1],u=i[2],s=L(["click","drag"],function(){return o("")}),l=Object(T.a)(s,3),f=l[0],m=l[1],g=l[2];function v(){g(!1),o("")}function b(){u&&(a(d,n),v())}var p="lane"===t?"\u043a\u043e\u043b\u043e\u043d\u043a\u0443":"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",I={placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 ".concat("lane"===t?"\u043a\u043e\u043b\u043e\u043d\u043a\u0438":"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438"),value:d,onChange:function(e){o(e.target.value)},onKeyDown:function(e){var t=e.key;switch(!0){case e.shiftKey&&"Enter"===t:break;case"Enter"===t:b();break;case"Escape"===t||"Esc"===t:v()}},autoFocus:!0};return m?r.a.createElement("div",{className:"column add-new add-new_".concat(t," add-new__form"),ref:f},"lane"===t?r.a.createElement("input",Object.assign({className:"box input add-new__input",type:"text"},I)):r.a.createElement("textarea",Object.assign({className:"box textarea add-new__textarea",rows:"2"},I)),r.a.createElement("div",{className:"row add-new__buttons"},r.a.createElement("button",{className:"button add-new__button",type:"button",disabled:!u,onClick:b},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c ".concat(p)),r.a.createElement("img",{className:"add-new__icon-cross",src:J.a,alt:"Close",onClick:v}))):r.a.createElement("div",{className:"row add-new add-new_".concat(t," add-new__placeholder-").concat(t),onClick:function(){g(!0)}},r.a.createElement("img",{className:"add-new__icon-add",src:P.a,alt:"New ".concat(t)}),r.a.createElement("div",{className:"add-new__text"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443 ".concat(p)))});var F=Object(o.DropTarget)(C.CARD,{hover:function(e,t){var n=e.lane,a=e.onCardMove,r=t.getItem().cardId;n.cardIds.length||a(r,n.id)}},function(e){return{connectDropTarget:e.dropTarget()}})(function(e){var t=e.lane;return(0,e.connectDropTarget)(r.a.createElement("div",{className:"column lane"},r.a.createElement("div",{className:"lane__header"},t.name),r.a.createElement("div",{className:"lane__body"},t.cardIds.map(function(e,t){return r.a.createElement(A,{key:e,cardId:e,cardIndex:t})})),r.a.createElement("div",{className:"lane__footer"},r.a.createElement(K,{type:"card",laneId:t.id}))))});var H=Object(d.b)(function(e,t){return{lane:e.laneState.entities[t.laneId]}},function(e){return{onCardMove:function(t,n){return e(k(t,n))}}})(F);var Q=function(e){var t=e.item,n=t.cardId,a={height:t.height,width:t.width,transform:"rotate(5deg)"};return r.a.createElement("div",{style:a},r.a.createElement(A,{cardId:n}))};var V=Object(o.DragLayer)(function(e){return{item:e.getItem(),itemType:e.getItemType(),currentSourceOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}})(function(e){var t=e.item,n=e.itemType,a=e.currentSourceOffset;return e.isDragging?r.a.createElement("div",{className:"custom-drag-layer",style:function(){if(!a)return{};var e=a.x,t=a.y;return{transform:"translate(".concat(e,"px, ").concat(t,"px)")}}()},function(){switch(n){case C.CARD:return r.a.createElement(Q,{item:t});default:return null}}()):null});var z=Object(d.b)(function(e){return{laneIds:e.laneState.ids}})(function(e){var t=e.laneIds;return r.a.createElement("div",{className:"row app"},r.a.createElement(V,null),Boolean(t.length)&&t.map(function(e){return r.a.createElement(H,{key:e,laneId:e})}),r.a.createElement(K,{type:"lane"}))});n(112);i.a.render(r.a.createElement(d.a,{store:x},r.a.createElement(o.DragDropContextProvider,{backend:s.a},r.a.createElement(z,null))),document.getElementById("root"))},50:function(e,t,n){e.exports=n.p+"static/media/plusIcon.61af6571.svg"},51:function(e,t,n){e.exports=n.p+"static/media/crossIcon.220fb32e.svg"},52:function(e,t,n){e.exports=n(113)}},[[52,1,2]]]);
//# sourceMappingURL=main.8f22378d.chunk.js.map