(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),i=n.n(c),d=n(3),o=n(10),s=n(48),u=n.n(s),l=n(9),v=n(49),b=n(6),f=n(4),m=n(2),g=n(21),O=n.n(g),j="LANE_ADD",p="CARD_ADD",I="CARD_MOVE";var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{entities:{},ids:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return function(e,t){var n=O()(),a={id:n,name:t.name.trim(),cardIds:[]},r=Object(m.a)({},e.entities,Object(f.a)({},n,a)),c=[].concat(Object(b.a)(e.ids),[n]);return Object(m.a)({},e,{entities:r,ids:c})}(e,t);case p:return function(e,t){var n=t.card,a=n.laneId,r=n.cardId,c=e.entities[a],i=Object(m.a)({},c,{cardIds:[].concat(Object(b.a)(c.cardIds),[r])}),d=Object(m.a)({},e.entities,Object(f.a)({},a,i));return Object(m.a)({},e,{entities:d})}(e,t);case I:return function(e,t){for(var n,a=t.sourceCardId,r=t.targetId,c=null,i=null,d=e.ids.length,o=0;o<d;o+=1){var s=e.entities[e.ids[o]].cardIds,u=s.includes(a),l=s.includes(r)||e.ids[o]===r;if(u&&(c=e.ids[o],i))break;if(l&&(i=e.ids[o],c))break}var v=e.entities[c],g=e.entities[i]||e.entities[r],O=v.cardIds.findIndex(function(e){return e===a}),j=g.cardIds.findIndex(function(e){return e===r});if(c===i){var p=Object(b.a)(v.cardIds);p.splice(O,1),p.splice(j,0,a);var I=Object(m.a)({},v,{cardIds:p}),E=Object(m.a)({},e.entities,Object(f.a)({},c,I));return Object(m.a)({},e,{entities:E})}var _=Object(b.a)(v.cardIds);_.splice(O,1);var w=Object(m.a)({},v,{cardIds:_}),h=Object(b.a)(g.cardIds);h.splice(j,0,a);var D=Object(m.a)({},g,{cardIds:h}),k=Object(m.a)({},e.entities,(n={},Object(f.a)(n,c,w),Object(f.a)(n,i,D),n));return Object(m.a)({},e,{entities:k})}(e,t);default:return e}};var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{entities:{},ids:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return function(e,t){var n=t.card,a=n.cardId,r={id:a,task:n.task.trim()},c=Object(m.a)({},e.entities,Object(f.a)({},a,r)),i=[].concat(Object(b.a)(e.ids),[a]);return Object(m.a)({},e,{entities:c,ids:i})}(e,t);default:return e}},w=Object(l.combineReducers)({laneState:E,cardState:_}),h=Object(v.createLogger)(),D=Object(l.createStore)(w,void 0,Object(l.applyMiddleware)(h));function k(e,t){return{type:I,sourceCardId:e,targetId:t}}var y="card";var N=Object(o.DragSource)(y,{beginDrag:function(e){return{cardId:e.cardId}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(function(e){var t=e.task,n=e.connectDragSource,c=e.isDragging,i=e.connectDropTarget,d=e.isOver,o=Object(a.useRef)();n(o),i(o);var s="box card";return(c||d)&&(s+=" card_dragging"),r.a.createElement("div",{className:s,ref:o},t)}),x=Object(o.DropTarget)(y,{hover:function(e,t){var n=e.cardId,a=e.onCardMove,r=t.getItem().cardId;r!==n&&a(r,n)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(N);var C=Object(d.b)(function(e,t){return{task:e.cardState.entities[t.cardId].task}},function(e){return{onCardMove:function(t,n){return e(k(t,n))}}})(x),S=n(5);var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return/\S+/.test(e)},r=Object(a.useState)(e),c=Object(S.a)(r,2),i=c[0],d=c[1],o=Object(a.useState)(t),s=Object(S.a)(o,2),u=s[0],l=s[1];return Object(a.useEffect)(function(){var e=n(i);l(e)},[i]),[i,d,u,l]};var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["click"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(a.useState)(n),c=Object(S.a)(r,2),i=c[0],d=c[1],o=Object(a.useRef)(null);function s(e){o.current&&!o.current.contains(e.target)&&(d(!1),t())}return Object(a.useEffect)(function(){return e.forEach(function(e){document.addEventListener(e,s)}),function(){e.forEach(function(e){document.removeEventListener(e,s)})}},[]),[o,i,d]},M=n(50),R=n.n(M),L=n(51),B=n.n(L);var J=Object(d.b)(null,function(e,t){return{onAdd:function(n,a){return e("lane"===t.type?{type:j,name:n}:(r={laneId:a,cardId:O()(),task:n},{type:p,card:r}));var r}}})(function(e){var t=e.type,n=e.laneId,a=e.onAdd,c=T(),i=Object(S.a)(c,3),d=i[0],o=i[1],s=i[2],u=A(["click","drag"],function(){return o("")}),l=Object(S.a)(u,3),v=l[0],b=l[1],f=l[2];function m(){f(!1),o("")}function g(){s&&(a(d,n),m())}var O="lane"===t?"\u043a\u043e\u043b\u043e\u043d\u043a\u0443":"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",j={placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 ".concat("lane"===t?"\u043a\u043e\u043b\u043e\u043d\u043a\u0438":"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438"),value:d,onChange:function(e){o(e.target.value)},onKeyDown:function(e){var t=e.key;switch(!0){case e.shiftKey&&"Enter"===t:break;case"Enter"===t:g();break;case"Escape"===t||"Esc"===t:m()}},autoFocus:!0};return b?r.a.createElement("div",{className:"column add-new add-new_".concat(t," add-new__form"),ref:v},"lane"===t?r.a.createElement("input",Object.assign({className:"box input add-new__input",type:"text"},j)):r.a.createElement("textarea",Object.assign({className:"box textarea add-new__textarea",rows:"2"},j)),r.a.createElement("div",{className:"row add-new__buttons"},r.a.createElement("button",{className:"button add-new__button",type:"button",disabled:!s,onClick:g},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c ".concat(O)),r.a.createElement("img",{className:"add-new__icon-cross",src:B.a,alt:"Close",onClick:m}))):r.a.createElement("div",{className:"row add-new add-new_".concat(t," add-new__placeholder-").concat(t),onClick:function(){f(!0)}},r.a.createElement("img",{className:"add-new__icon-add",src:R.a,alt:"New ".concat(t)}),r.a.createElement("div",{className:"add-new__text"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443 ".concat(O)))});var K=Object(o.DropTarget)(y,{hover:function(e,t){var n=e.lane,a=e.onCardMove,r=t.getItem().cardId;n.cardIds.length||a(r,n.id)}},function(e){return{connectDropTarget:e.dropTarget()}})(function(e){var t=e.lane;return(0,e.connectDropTarget)(r.a.createElement("div",{className:"column lane"},r.a.createElement("div",{className:"lane__header"},t.name),r.a.createElement("div",{className:"lane__body"},t.cardIds.map(function(e){return r.a.createElement(C,{key:e,cardId:e})})),r.a.createElement("div",{className:"lane__footer"},r.a.createElement(J,{type:"card",laneId:t.id}))))});var F=Object(d.b)(function(e,t){return{lane:e.laneState.entities[t.laneId]}},function(e){return{onCardMove:function(t,n){return e(k(t,n))}}})(K);var P=Object(d.b)(function(e){return{laneIds:e.laneState.ids}})(function(e){var t=e.laneIds;return r.a.createElement("div",{className:"row app"},Boolean(t.length)&&t.map(function(e){return r.a.createElement(F,{key:e,laneId:e})}),r.a.createElement(J,{type:"lane"}))});n(112);i.a.render(r.a.createElement(d.a,{store:D},r.a.createElement(o.DragDropContextProvider,{backend:u.a},r.a.createElement(P,null))),document.getElementById("root"))},50:function(e,t,n){e.exports=n.p+"static/media/plusIcon.61af6571.svg"},51:function(e,t,n){e.exports=n.p+"static/media/crossIcon.220fb32e.svg"},52:function(e,t,n){e.exports=n(113)}},[[52,1,2]]]);
//# sourceMappingURL=main.8ac90d2f.chunk.js.map