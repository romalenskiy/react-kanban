(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),d=a.n(c),i=a(3),o=a(9),s=a(48),u=a.n(s),l=a(8),b=a(49),v=a(5),f=a(4),m=a(2),g=a(21),O=a.n(g),j="LANE_ADD",p="CARD_ADD",I="CARD_MOVE";var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{entities:{},ids:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return function(e,t){var a=O()(),n={id:a,name:t.name.trim(),cardIds:[]},r=Object(m.a)({},e.entities,Object(f.a)({},a,n)),c=[].concat(Object(v.a)(e.ids),[a]);return Object(m.a)({},e,{entities:r,ids:c})}(e,t);case p:return function(e,t){var a=t.card,n=a.laneId,r=a.cardId,c=e.entities[n],d=Object(m.a)({},c,{cardIds:[].concat(Object(v.a)(c.cardIds),[r])}),i=Object(m.a)({},e.entities,Object(f.a)({},n,d));return Object(m.a)({},e,{entities:i})}(e,t);case I:return function(e,t){for(var a,n=t.sourceCardId,r=t.targetId,c=null,d=null,i=e.ids.length,o=0;o<i;o+=1){var s=e.entities[e.ids[o]].cardIds,u=s.includes(n),l=s.includes(r)||e.ids[o]===r;if(u&&(c=e.ids[o],d))break;if(l&&(d=e.ids[o],c))break}var b=e.entities[c],g=e.entities[d]||e.entities[r],O=b.cardIds.findIndex(function(e){return e===n}),j=g.cardIds.findIndex(function(e){return e===r});if(c===d){var p=Object(v.a)(b.cardIds);p.splice(O,1),p.splice(j,0,n);var I=Object(m.a)({},b,{cardIds:p}),E=Object(m.a)({},e.entities,Object(f.a)({},c,I));return Object(m.a)({},e,{entities:E})}var _=Object(v.a)(b.cardIds);_.splice(O,1);var w=Object(m.a)({},b,{cardIds:_}),D=Object(v.a)(g.cardIds);D.splice(j,0,n);var h=Object(m.a)({},g,{cardIds:D}),k=Object(m.a)({},e.entities,(a={},Object(f.a)(a,c,w),Object(f.a)(a,d,h),a));return Object(m.a)({},e,{entities:k})}(e,t);default:return e}};var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{entities:{},ids:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return function(e,t){var a=t.card,n=a.cardId,r={id:n,task:a.task.trim()},c=Object(m.a)({},e.entities,Object(f.a)({},n,r)),d=[].concat(Object(v.a)(e.ids),[n]);return Object(m.a)({},e,{entities:c,ids:d})}(e,t);default:return e}},w=Object(l.combineReducers)({laneState:E,cardState:_}),D=Object(b.createLogger)(),h=Object(l.createStore)(w,void 0,Object(l.applyMiddleware)(D));function k(e,t){return{type:I,sourceCardId:e,targetId:t}}var y="card";var N=Object(o.DragSource)(y,{beginDrag:function(e){return{cardId:e.cardId}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(function(e){var t=e.task,a=e.connectDragSource,c=e.isDragging,d=e.connectDropTarget,i=e.isOver,o=Object(n.useRef)();a(o),d(o);var s="box card";return(c||i)&&(s+=" card_dragging"),r.a.createElement("div",{className:s,ref:o},t)}),x=Object(o.DropTarget)(y,{hover:function(e,t){var a=e.cardId,n=e.onCardMove,r=t.getItem().cardId;r!==a&&n(r,a)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(N);var C=Object(i.b)(function(e,t){return{task:e.cardState.entities[t.cardId].task}},function(e){return{onCardMove:function(t,a){return e(k(t,a))}}})(x),S=a(13);var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return/\S+/.test(e)},r=Object(n.useState)(e),c=Object(S.a)(r,2),d=c[0],i=c[1],o=Object(n.useState)(t),s=Object(S.a)(o,2),u=s[0],l=s[1];return Object(n.useEffect)(function(){var e=a(d);l(e)},[d]),[d,i,u,l]},A=a(50),M=a.n(A),R=a(51),B=a.n(R);var J=Object(i.b)(null,function(e,t){return{onAdd:function(a,n){return e("lane"===t.type?{type:j,name:a}:(r={laneId:n,cardId:O()(),task:a},{type:p,card:r}));var r}}})(function(e){var t=e.type,a=e.laneId,c=e.onAdd,d=T(),i=Object(S.a)(d,3),o=i[0],s=i[1],u=i[2],l=Object(n.useState)(!1),b=Object(S.a)(l,2),v=b[0],f=b[1];function m(){f(!1),s("")}function g(){u&&(c(o,a),m())}var O="lane"===t?"\u043a\u043e\u043b\u043e\u043d\u043a\u0443":"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",j={placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 ".concat("lane"===t?"\u043a\u043e\u043b\u043e\u043d\u043a\u0438":"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438"),value:o,onChange:function(e){s(e.target.value)},onKeyDown:function(e){var t=e.key;switch(!0){case e.shiftKey&&"Enter"===t:break;case"Enter"===t:g();break;case"Escape"===t||"Esc"===t:m()}},autoFocus:!0};return v?r.a.createElement("div",{className:"column add-new add-new_".concat(t," add-new__form")},"lane"===t?r.a.createElement("input",Object.assign({className:"box input add-new__input",type:"text"},j)):r.a.createElement("textarea",Object.assign({className:"box textarea add-new__textarea",rows:"2"},j)),r.a.createElement("div",{className:"row add-new__buttons"},r.a.createElement("button",{className:"button add-new__button",type:"button",disabled:!u,onClick:g},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c ".concat(O)),r.a.createElement("img",{className:"add-new__icon-cross",src:B.a,alt:"Close",onClick:m}))):r.a.createElement("div",{className:"row add-new add-new_".concat(t," add-new__placeholder-").concat(t),onClick:function(){f(!0)}},r.a.createElement("img",{className:"add-new__icon-add",src:M.a,alt:"New ".concat(t)}),r.a.createElement("div",{className:"add-new__text"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443 ".concat(O)))});var K=Object(o.DropTarget)(y,{hover:function(e,t){var a=e.lane,n=e.onCardMove,r=t.getItem().cardId;a.cardIds.length||n(r,a.id)}},function(e){return{connectDropTarget:e.dropTarget()}})(function(e){var t=e.lane;return(0,e.connectDropTarget)(r.a.createElement("div",{className:"column lane"},r.a.createElement("div",{className:"lane__header"},t.name),r.a.createElement("div",{className:"lane__body"},t.cardIds.map(function(e){return r.a.createElement(C,{key:e,cardId:e})})),r.a.createElement("div",{className:"lane__footer"},r.a.createElement(J,{type:"card",laneId:t.id}))))});var L=Object(i.b)(function(e,t){return{lane:e.laneState.entities[t.laneId]}},function(e){return{onCardMove:function(t,a){return e(k(t,a))}}})(K);var F=Object(i.b)(function(e){return{laneIds:e.laneState.ids}})(function(e){var t=e.laneIds;return r.a.createElement("div",{className:"row app"},Boolean(t.length)&&t.map(function(e){return r.a.createElement(L,{key:e,laneId:e})}),r.a.createElement(J,{type:"lane"}))});a(112);d.a.render(r.a.createElement(i.a,{store:h},r.a.createElement(o.DragDropContextProvider,{backend:u.a},r.a.createElement(F,null))),document.getElementById("root"))},50:function(e,t,a){e.exports=a.p+"static/media/plusIcon.61af6571.svg"},51:function(e,t,a){e.exports=a.p+"static/media/crossIcon.220fb32e.svg"},52:function(e,t,a){e.exports=a(113)}},[[52,1,2]]]);
//# sourceMappingURL=main.ed209b9c.chunk.js.map